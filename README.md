# 别踩白块游戏 - 音乐节奏版

一个基于 HTML5 Canvas 开发的音乐节奏游戏，结合了经典的"别踩白块"玩法和音乐节奏元素。

## 在线体验
访问 [https://yehao0716.github.io/dont-tap-white-block/](https://yehao0716.github.io/dont-tap-white-block/) 即可开始游戏。

## 游戏规则
1. 游戏界面由4×4的黑白方块组成
2. 玩家需要点击黑色方块，可以使用鼠标点击或键盘 Q/W/E/R 键
3. 点击白色方块或让黑色方块移动到底部都会导致游戏结束
4. 需要跟随音乐节奏点击，当节拍线进入黄色区域时是最佳点击时机
5. 游戏会记录玩家的得分和最高分

## 游戏特点

### 1. 音乐节奏系统
- 实时音频分析和节拍检测
- 可视化的节拍提示线
- 最佳点击时机提示
- 音乐进度显示

### 2. 渐进式难度系统
- 0-9分：基础速度
- 10-19分：速度提升20%
- 20-29分：速度提升40%
- 30-49分：速度提升60%
- 50-69分：速度提升80%
- 70-99分：速度翻倍
- 100分以上：速度提升120%

### 3. 视觉反馈系统
- 动态点击特效
- 音符飘动动画
- 节拍线动态效果
- 进度条可视化
- 实时分数显示

### 4. 操作方式
- 鼠标点击：直接点击黑色方块
- 键盘控制：
  - Q：第一列
  - W：第二列
  - E：第三列
  - R：第四列

### 5. 节奏指示系统
- 实时BPM显示（每分钟节拍数）
- 垂直节拍指示器，显示精确的点击时机
- 动态节拍线从上到下移动
- 底部黄色区域标识最佳点击时机
- "点击!"文字提示和闪烁效果

### 6. 游戏界面布局
- 左侧：4×4的黑白方块游戏区
- 中间：实时节拍信息显示
  - 当前BPM
  - 当前播放时间
  - 下一个节拍时间
  - 未来5个节拍点预览
- 右侧：垂直节拍指示器
  - 移动的红色节拍线
  - 底部黄色最佳点击区域
  - 点击提示效果

### 7. 计分规则
- 在节拍点击黑块：+1分
- 点击白块或错过黑块：游戏结束
- 保存最高分记录

### 8. 游戏玩法说明
1. 观察右侧节拍指示器
2. 等待红色节拍线移动到底部黄色区域
3. 在最佳时机点击对应的黑块
4. 跟随音乐节奏持续游戏

### 9. 视觉反馈系统
- 节拍线颜色变化（灰色→红色）
- 最佳点击区域闪烁效果
- 黑块高亮提示
- 实时节拍信息更新

## 技术特点
- 使用 HTML5 Canvas 进行游戏渲染
- Web Audio API 处理音频和节拍检测
- 高精度节拍分析算法
  - 50ms采样窗口
  - 能量平滑处理
  - 峰值检测
  - 中位数BPM计算
- 响应式设计，适配不同屏幕尺寸
- localStorage 保存最高分记录
- 模块化的游戏架构设计

## 本地开发

### 环境要求
- 现代浏览器（支持 HTML5 和 Web Audio API）
- 本地 Web 服务器（可以使用以下任一方式）：
  - Python: `python -m http.server 8000`
  - VS Code: Live Server 插件
  - 任何其他 HTTP 服务器

### 安装步骤
1. 克隆仓库
```bash
git clone https://github.com/yehao0716/dont-tap-white-block.git
```

2. 进入项目目录
```bash
cd dont-tap-white-block
```

3. 启动本地服务器
```bash
python -m http.server 8000
```

4. 打开浏览器访问 `http://localhost:8000`

## 游戏技巧
1. 关注右侧节拍指示器，它是你最重要的节奏向导
2. 等待红色节拍线进入黄色区域再点击
3. 使用键盘操作可以获得更快的响应速度
4. 保持稳定的节奏感，不要过快或过慢
5. 配合音乐节奏来点击，会让游戏体验更好

## 开发计划
- [x] 基础游戏界面搭建
- [x] 实现方块生成和移动逻辑
- [x] 添加点击检测和游戏规则
- [x] 实现计分系统
- [x] 实现渐进式难度系统
- [x] 添加音乐节奏系统
- [x] 添加节拍指示器
- [x] 优化节拍检测算法
- [ ] 添加更多音乐曲目
- [ ] 添加暂停功能
- [ ] 添加教程模式
- [ ] 添加不同游戏模式

## 贡献
欢迎提交 Issue 和 Pull Request 来帮助改进游戏。

## 许可证
本项目采用 MIT 许可证。
